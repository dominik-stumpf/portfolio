# portfolio

## Optimization

### Image

```tsx
<Image
  src={notebookImage}
  placeholder="blur"
  alt="notebook with math and algorithms in it"
  sizes="(min-width: 768px) 730px, 85vw"
/>
```

Scaled down versions of the image using the `srcset` attribute are automatically generated by NextJS. The above `sizes` attribute results in close matching of intrinsic (downloaded size) and rendered sizes (container size).

Full HD Display (DPR-1):

![Full HD Display](/showcase/image-scaling-full-hd-display-dpr-1.png)

iPhone 14 Pro Max (DPR-3):

![iPhone 14 Pro Max](/showcase/image-scaling-iphone-14-pro-max-dpr-3.png)

> Since the iPhone 14 has a DPR of 3, the intrinsic size is also tripled.

### Video

Videos are processed by ffmpeg. List of commands used:

1. **AVC** - MP4 (most preferred)

```bash
ffmpeg -i input.mp4 -c:v libx264 -crf 32 -vf scale=728:-2 -preset veryslow -movflags faststart -an -r 30 output.mp4
```

2. **HEVC** - MP4

```bash
ffmpeg -i input.mp4 -c:v libx265 -crf 32 -vf scale=728:-2 -preset veryslow -tag:v hvc1 -movflags faststart -an -r 30 output.mp4
```

3. **VP9** - WebM

```bash
ffmpeg -i input.mp4 -c:v libvpx-vp9 -crf 40 -vf scale=728:-2 -deadline best -an -r 30 output.webm
```

4. **AV1** - MP4 (least preferred)

```bash
ffmpeg -i input.mp4 -c:v libaom-av1 -crf 30 -vf scale=728:-2 -an -r 30 output.mp4
```

Command for aoc clip:

```bash
ffmpeg -i input-src.mkv -vf "crop=1222:1328:0:0" -ss 00:00:01.22 -to 00:00:15.5 output-src.mkv
```
